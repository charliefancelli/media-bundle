!function(){"use strict";var e,t={3272:function(e,t,a){a.r(t),t.default={env:"production",assets_url_prefix:"/bundles/rankymedia/",uppy_locales:"ar_SA,bg_BG,ca_ES,cs_CZ,da_DK,de_DE,el_GR,en_US,en_US,es_ES,es_MX,fa_IR,fi_FI,fr_FR,gl_ES,he_IL,hi_IN,hr_HR,hu_HU,id_ID,is_IS,it_IT,ja_JP,ko_KR,nb_NO,nl_NL,pl_PL,pt_BR,pt_PT,ro_RO,ru_RU,sk_SK,sr_RS_Cyrillic,sr_RS_Latin,sv_SE,th_TH,tr_TR,uk_UA,uz_UZ,vi_VN,zh_CN,zh_TW"?.split(","),root_class:".ranky-media"}},1890:function(e,t,a){a.r(t),a.d(t,{addEventForChild:function(){return r},addListenerMulti:function(){return n},on:function(){return l},replaceElement:function(){return i}});const l=(e,t,a,l)=>{e.addEventListener(a,(e=>{e.target.matches(t)&&l(e)}))};function n(e,t,a){t.split(" ").forEach((t=>e.addEventListener(t,a,!1)))}const r=function(e,t,a,l){e&&n(e,t,(e=>{const t=e.target.closest(a);t&&l(e,t)}))},i=function(e){const t=e.cloneNode(!0);return e.parentNode.replaceChild(t,e)}},1696:function(e,t,a){a.r(t);t.default=async e=>{if(!e)return null;if(!(e instanceof FormData))return JSON.stringify(e);const t={};return e.forEach(((e,a)=>{t[a]=e})),JSON.stringify(t)}},2377:function(e,t,a){function l(e){let t=e;for(;t;)if(t=t.parentElement,Object.keys(t).some((e=>e.includes("_reactRootContainer"))))return t;return null}a.r(t),a.d(t,{getRootElement:function(){return l}})},6779:function(e,t,a){a.r(t),t.default=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const a=document.createElement("script");a.setAttribute("src",e),a.onload=t,document.head.appendChild(a)}},3297:function(e,t,a){a.r(t),a.d(t,{capitalize:function(){return l},removeLastChar:function(){return n}});const l=e=>e&&e.charAt(0).toUpperCase()+e.slice(1),n=(e,t)=>e.slice(-1)===t?e.slice(0,-1):e},2213:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=a(5942),i=a(355),u=new r.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,staleTime:12e4}}});t.default=e=>{let{children:t,apiPrefix:a,selectionMode:l,multipleSelection:o,title:d,targetRef:s}=e;return n.default.createElement(r.QueryClientProvider,{client:u},n.default.createElement(i.MediaProvider,{title:d,apiPrefix:a,selectionMode:l,multipleSelection:o,targetRef:s},n.default.createElement(n.default.StrictMode,null,t)))}},8256:function(e,t,a){var l=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,n)}:function(e,t,a,l){void 0===l&&(l=a),e[l]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&l(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(a(6540)),o=i(a(6573));a(3561);const d=i(a(8862)),s=i(a(4023)),c=i(a(5991)),f=a(6495),m=i(a(9144)),p=i(a(5982)),_=i(a(8339)),h=i(a(3054)),g=u.default.lazy((()=>Promise.resolve().then((()=>r(a(1988))))));t.default=e=>{let{predefinedData:t=null,fieldId:a}=e;const l=(0,u.useRef)(),[n,r]=(0,u.useState)(!1),i=(0,d.default)(),y=(0,s.default)(),v=(0,h.default)(),[b,E]=(0,u.useState)(!1),w=(0,u.useCallback)((()=>r(!1)),[]),{selectedMedia:M,setSelectedMedia:O,onInsertSelection:S}=(0,_.default)(a);if((0,u.useLayoutEffect)((()=>{t&&(async()=>{let e;E(!0);let a=t;if(y.isMultipleSelection){let l;try{l=JSON.parse(t)}catch(e){l=[]}if(0===l.length)return E(!1),null;a=`?page[disable]=1&filters[id][${p.default.INCLUDES}]=${l.join(",")}`,e=e=>v.filter(e)}else e=e=>v.get(e);const{data:l,error:n}=await e(a);n?(console.log(n),E(!1),(0,f.errorAlert)(n)):(O("result"in l?l.result:[l]),E(!1))})()}),[v,t,E,O,y]),b)return u.default.createElement(m.default,null);function k(){r(!0)}return u.default.createElement(u.default.Fragment,null,u.default.createElement("div",{ref:l,className:"ranky-media-form-type__content__preview"},0===M.length?u.default.createElement("div",{tabIndex:0,role:"button",onClick:k,onKeyDown:k},u.default.createElement("img",{src:(0,o.default)("images/choose-image.png"),alt:"Default image. Select a media file"})):M.map((e=>u.default.createElement("div",{key:`wrapper-selected-${a}-${e.id}`,tabIndex:0,role:"button",onClick:k,onKeyDown:k},u.default.createElement(c.default,{media:e}))))),u.default.createElement("div",{className:"ranky-media-form-type__content__wrapper_button"},u.default.createElement("button",{className:"clean-selected-media-files",type:"button",title:i.trans("form_type.clean_selection_button"),onClick:function(){O([]),l.current.parentElement.parentElement.querySelector(`input#${a}`).value=""}},i.trans("form_type.clean_selection_button")),u.default.createElement("button",{type:"button",title:i.trans("form_type.open_selection_button"),onClick:k},i.trans("form_type.open_selection_button"))),u.default.createElement(u.Suspense,{fallback:""},n?u.default.createElement(g,{onInsertSelection:S,onCloseModal:w}):null))}},143:function(e,t,a){var l=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,n)}:function(e,t,a,l){void 0===l&&(l=a),e[l]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&l(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(a(6540));a(1548);const o=i(a(9144)),d=i(a(5329)),s=i(a(4799)),c=a(7718),f=i(a(4628)),m=a(5942),p=a(3521),_=i(a(226)),h=a(16),g=u.default.lazy((()=>Promise.resolve().then((()=>r(a(6159))))));t.default=()=>{const[e,t]=(0,u.useState)(!1),{useList:a}=(0,f.default)(),{data:l,fetchNextPage:n,hasNextPage:r,isFetchingNextPage:i,isLoading:y}=a(),v=(0,m.useIsMutating)(),b=(0,f.default)(),E=(0,h.useSetAtom)(c.currentMediaState),w=(0,h.useAtomValue)(c.loadingState),M=(0,h.useAtomValue)(c.pageLayoutState),O=p.LayoutType[M];if(y)return u.default.createElement(o.default,null);return u.default.createElement(u.default.Fragment,null,u.default.createElement(_.default,null),u.default.createElement(s.default,null),v||w?u.default.createElement(o.default,{style:{opacity:.9,top:"78px"}}):null,u.default.createElement("div",{className:"ranky-media__items"},u.default.createElement(O,{pages:null==l?void 0:l.pages,openModalFile:e=>function(e){const a=b.find(e);E(a),t(!0)}(e)}),u.default.createElement(d.default,{data:l,loadMore:n,hasNextPage:r,isFetchingNextPage:i})),u.default.createElement(u.Suspense,{fallback:""},e?u.default.createElement(g,{onClose:()=>t(!1)}):null))}},1988:function(e,t,a){var l=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,n)}:function(e,t,a,l){void 0===l&&(l=a),e[l]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&l(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(a(6540));a(9362);const o=i(a(143)),d=i(a(3272)),s=a(7718),c=i(a(4628)),f=a(2377),m=i(a(22)),p=a(6495),_=i(a(4023)),h=i(a(8862)),g=a(16);t.default=e=>{let{onCloseModal:t,onInsertSelection:a}=e;const[l,n]=(0,g.useAtom)(s.selectedMediaState),[r,i]=(0,g.useAtom)(s.dbClickState),y=(0,c.default)(),v=(0,u.useRef)(null),b=(0,_.default)(),E=(0,h.default)(),w=(0,u.useRef)(null);let M=E.trans("selection_mode.zero_element");function O(){n([])}function S(){"function"==typeof t?t():v.current.remove(),setTimeout((async()=>{O()}),100)}return l.length>1?M=E.trans("selection_mode.multiple_elements",{length:l.length}):1===l.length&&(M=E.trans("selection_mode.one_element")),(0,u.useEffect)((()=>{!0===r&&(w.current&&w.current.click(),i(!1))}),[r,i]),u.default.createElement("div",{className:"ranky-media-modal ranky-media-modal--show",ref:v},u.default.createElement("div",{className:"ranky-media-modal__dialog",role:"document"},u.default.createElement("div",{className:"ranky-media-modal__dialog__title"},u.default.createElement("h2",null,b.title||"Media File Manager")),u.default.createElement("button",{onClick:S,title:E.trans("modal_close"),type:"button",className:"ranky-media-modal__btn-media-close js-close-modal","aria-label":E.trans("modal_close")},u.default.createElement("span",{"aria-hidden":"true"},"×")),u.default.createElement("div",{className:"ranky-media-modal__content"},u.default.createElement("div",{className:d.default.root_class.slice(1)},u.default.createElement(o.default,null))),u.default.createElement("div",{className:"ranky-media-modal__dialog__footer"},u.default.createElement("div",{className:"ranky-media-modal__dialog__footer__info"},u.default.createElement("p",null,u.default.createElement("b",null,M)),u.default.createElement("p",null,u.default.createElement("button",{type:"button",onClick:O},E.trans("selection_mode.clean")))),u.default.createElement("div",{className:"ranky-media-modal__dialog__footer__actions"},u.default.createElement("p",null,u.default.createElement("button",{ref:w,className:"ranky-media-modal__insert-action",type:"button",onClick:e=>function(e){const t=l.map((e=>y.find(e)));let n;if(b.targetRef)n=b.targetRef;else{const t=(0,f.getRootElement)(e.target);if(!t){const e=new m.default("Root element not found in the hierarchy component tree",404);return void(0,p.errorAlert)(e)}n=t}"function"==typeof a&&a(t,n);const r=new CustomEvent("ranky-media:selected-media",{detail:{medias:t}});n.dispatchEvent(r),O(),S()}(e)},E.trans("selection_mode.insert")))))),u.default.createElement("div",{className:"ranky-media-modal__backdrop"}))}},3059:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(2894),r=l(a(3054)),i=a(5942);t.default=()=>{const e=(0,r.default)(),{data:t,error:a,isLoading:l}=(0,i.useQuery)("filters",(()=>(0,n.fetcher)(e.getRoutes().filters)));return{data:t,error:a,isLoading:l}}},4628:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(2894),r=a(5942),i=l(a(3054));t.default=()=>{const e=(0,r.useQueryClient)(),t=(0,i.default)();function a(){return e.getQueryData(["media","list"])}return{useList:()=>(0,r.useInfiniteQuery)(["media","list"],(e=>{let{pageParam:a=1}=e;return(0,n.fetcherWithQueryString)(t.getRoutes().all,a||1)}),{getNextPageParam:e=>{const t=e.pagination.page;return t<e.pagination.pages?t+1:null}}),list:a,size:function(){return a().pages.map((e=>e.result.length)).reduce(((e,t)=>e+t))},add:function(t){return e.setQueryData(["media","list"],(e=>({...e,pages:e.pages.map(((e,a)=>{if(0===a){const a=e.result.slice();return a.unshift(t),{result:a,pagination:e.pagination}}return e}))})))},all:function(){return a().pages.map((e=>e.result)).flat()},update:function(t){return e.setQueryData(["media","list"],(e=>({...e,pages:e.pages.map((e=>({result:e.result.map((e=>e.id===t.id?t:e)),pagination:e.pagination})))})))},find:function(e){const t=a();return null==t?void 0:t.pages.reduce(((t,a)=>a.result.find((t=>t.id===e))||t),{})},findIndex:function(e){const t=a();let l={page:0,index:0};return null==t||t.pages.forEach(((t,a)=>{const n=t.result.findIndex((t=>t.id===e));n>-1&&(l={page:a,index:n})})),l},reset:function(t){return e.setQueryData(["media","list"],{pages:[t],pageParams:[]})},remove:function(t){return e.setQueryData(["media","list"],(e=>({...e,pages:e.pages.map((e=>({result:e.result.filter((e=>e.id!==t.id)),pagination:e.pagination})))})))}}}},3054:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(6540),r=l(a(355));t.default=()=>(0,n.useContext)(r.default).mediaRepository},4023:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(6540),r=l(a(355));t.default=()=>(0,n.useContext)(r.default).settings},8862:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(6540),r=l(a(355));t.default=()=>(0,n.useContext)(r.default).translator},22:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class a extends Error{constructor(e,t,l){super(e,l),this.type=null,this.data=null,this.details=[],this.causes=[],this.status=t||400,this.name=this.constructor.name,Error.captureStackTrace&&Error.captureStackTrace(this,a)}hasCauses(){return this.causes.length>0}causesToHtml(){return`<ul>${this.causes.map((e=>`<li>${e.name}: ${e.reason}</li>`)).join("")}</ul>`}static fromApiProblem(e){const t=new a(e.title);return t.status=e.status,t.type=null==e?void 0:e.type,t.details=(null==e?void 0:e.details)||[],t.causes=(null==e?void 0:e.causes)||[],t}}t.default=a},9868:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class a{constructor(){this._title=null,this._targetRef=null,this._selectionMode=!1,this._multipleSelection=!1,this._assetsPrefixUrl="/bundles/rankymedia/",this._locale="en"}static getInstance(){return a.instance||(a.instance=new a),a.instance}get targetRef(){return this._targetRef}static set targetRef(e){a.getInstance()._targetRef=e}get title(){return this._title}static set title(e){a.getInstance()._title=e}get isSelectionMode(){return this._selectionMode}static set selectionMode(e){a.getInstance()._selectionMode=e}get isMultipleSelection(){return this._multipleSelection}static set multipleSelection(e){a.getInstance()._multipleSelection=e}static set apiPrefix(e){a.getInstance()._apiPrefix=e}get apiPrefix(){return this._apiPrefix}get locale(){return this._locale}get supportedImageTypes(){return this._supportedImageTypes}get placeholderImageTypes(){return this._placeholderImageTypes}get paginationLimit(){return this._paginationLimit}get uploadUrl(){return this._uploadUrl}get assetsPrefixUrl(){return this._assetsPrefixUrl}get maxFileSize(){return this._maxFileSize}get mimeTypes(){return this._mimeTypes}static fromApi(e){var t,l,n,r;const i=new a;return i._maxFileSize=(null===(t=e.config)||void 0===t?void 0:t.max_file_size)||null,i._mimeTypes=(null===(l=e.config)||void 0===l?void 0:l.mime_types)||[],i._uploadUrl=e.config.upload_url,i._locale=e.config.locale,i._supportedImageTypes=(null===(n=e.config)||void 0===n?void 0:n.supported_image_types)||[],i._placeholderImageTypes=(null===(r=e.config)||void 0===r?void 0:r.placeholder_image_types)||{},i._paginationLimit=e.config.pagination_limit,a.instance=i,a.instance}}t.default=a},5151:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});class a{constructor(){}static getInstance(){return a.instance||(a.instance=new a),a.instance}get translations(){return this._translations}trans(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Object.prototype.hasOwnProperty.call(this._translations,e))return e;let a=this._translations[e];return t&&Object.keys(t).forEach((e=>{a=a.replace(`{${e}}`,t[e])})),a}static fromApi(e){const t=new a;return t._translations=e.translations,a.instance=t,a.instance}}t.default=a},5083:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(1696)),r=l(a(22));class i{async fetcher(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=null;const u={method:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",credentials:"same-origin",headers:new Headers({...i.defaultHeaders,...a})};let o=e;t instanceof URLSearchParams?(o+=o.indexOf("?")>=0?"&":"?",o+=t.toString()):(t instanceof FormData||t instanceof Object)&&(u.body=await(0,n.default)(t));const d=await fetch(o,u),s=await d.json();if(!d.ok)if(null==s?void 0:s.title)l=r.default.fromApiProblem(s);else{const t=`Error ${d.status}: ${d.statusText} when fetch ${e}`;l=new r.default(t),l.data=s,l.status=d.status}return{data:s,error:l}}}t.default=i,i.defaultHeaders={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}},392:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(5083));class r extends n.default{constructor(e){super(),this.apiPrefix=e}getRoutes(){return{config:`${this.apiPrefix}/ranky/media/config`,filters:`${this.apiPrefix}/ranky/media/filters`,all:`${this.apiPrefix}/ranky/media`,upload:`${this.apiPrefix}/ranky/media`,filter:e=>`${this.apiPrefix}/ranky/media${e}`,get:e=>`${this.apiPrefix}/ranky/media/${e}`,delete:e=>`${this.apiPrefix}/ranky/media/${e}`,update:e=>`${this.apiPrefix}/ranky/media/${e}`}}static create(){return new r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}async get(e){return this.fetcher(this.getRoutes().get(e),"GET")}async filter(e){return this.fetcher(this.getRoutes().filter(e),"GET")}async filters(){return this.fetcher(this.getRoutes().filters,"GET")}async all(){return this.fetcher(this.getRoutes().all,"GET")}async delete(e){return this.fetcher(this.getRoutes().delete(e),"DELETE")}async post(e){return this.fetcher(this.getRoutes().upload,"POST",e)}async put(e,t){return this.fetcher(this.getRoutes().update(e),"PUT",t)}async bulkDelete(e){const t=await Promise.all(e.map((e=>this.delete(e))));return{data:t.reduce(((e,t)=>Object.assign(e,null==t?void 0:t.data)),{}),error:t.filter((e=>e.error)).map((e=>e.error))[0]||null}}}t.default=r},6573:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(4023));t.default=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=(0,n.default)();return t?e:`${a.assetsPrefixUrl}${e}`}},8742:function(e,t,a){var l=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,n)}:function(e,t,a,l){void 0===l&&(l=a),e[l]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&l(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(a(6540));a(347);const o=i(a(8862)),d=i(a(3272));t.default=e=>{let{onClick:t}=e;const a=(0,o.default)(),l=(0,u.useRef)();return(0,u.useEffect)((()=>{const e=document.querySelector(d.default.root_class);e.addEventListener("scroll",(()=>{l.current&&(l.current.style.bottom=20-e.scrollTop+"px")}))}),[]),u.default.createElement("div",{ref:l,className:"ranky-media__upload-floating-button"},u.default.createElement("button",{type:"button",title:a.trans("open_upload_dashboard"),"aria-label":a.trans("open_upload_dashboard"),onClick:t},u.default.createElement("svg",{"aria-hidden":"true",focusable:"false",width:"46",height:"46",viewBox:"0 0 32 32"},u.default.createElement("g",{fill:"none",fillRule:"evenodd"},u.default.createElement("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#2275D7"}),u.default.createElement("path",{d:"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z",fill:"#FFF"})))))}},8735:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(3272));a(5934);t.default=e=>{let{error:t}=e;return n.default.createElement("div",{className:`${r.default.root_class.slice(1)}__error`},n.default.createElement("h2",null,"❌ Error ",(null==t?void 0:t.status)||""),n.default.createElement("p",null,t.message),(null==t?void 0:t.hasCauses())&&`\n          <ul>\n            ${t.causes.map((e=>`<li>${e.name}: ${e.reason}</li>`))}\n        </ul>\n      `,(null==t?void 0:t.stack)&&n.default.createElement("pre",null,n.default.createElement("code",null,t.stack)))}},9144:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),a(4591);const n=l(a(6540));t.default=function(e){let{style:t={}}=e;return n.default.createElement("div",{id:"page-loader",className:"show",style:t})}},5329:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(8311)),i=l(a(4628));t.default=e=>{let{data:t,loadMore:a,hasNextPage:l,isFetchingNextPage:u}=e;const o=(0,i.default)().size(),{total:d}=t.pages[0].pagination;return n.default.createElement("div",{className:"pagination-media"},n.default.createElement("p",{className:"pagination-media__info"},n.default.createElement(r.default,{message:"pagination_info",data:{current:o,total:d}})),n.default.createElement("button",{type:"button",disabled:!l||u,className:"pagination-media__button",onClick:()=>a()},n.default.createElement(r.default,{message:"pagination_button_load"})))}},8311:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(8862));t.default=e=>{let{message:t,data:a=null}=e;const l=(0,r.default)().trans(t,a);return/<[a-z][\s\S]*>/i.test(l)?n.default.createElement("span",{dangerouslySetInnerHTML:{__html:l}}):l}},226:function(e,t,a){var l=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,n)}:function(e,t,a,l){void 0===l&&(l=a),e[l]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&l(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(a(6540)),o=i(a(8311)),d=i(a(8742)),s=i(a(5356));t.default=()=>{const[e,t]=(0,u.useState)(!1);return u.default.createElement(u.default.Fragment,null,u.default.createElement(d.default,{onClick:()=>t(!0)}),u.default.createElement("div",{className:"dropzone-drag-zone"},u.default.createElement("p",null,u.default.createElement("span",null,u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",fill:"currentColor",className:"bi bi-folder-plus",viewBox:"0 0 16 16"},u.default.createElement("path",{d:"m.5 3 .04.87a1.99 1.99 0 0 0-.342 1.311l.637 7A2 2 0 0 0 2.826 14H9v-1H2.826a1 1 0 0 1-.995-.91l-.637-7A1 1 0 0 1 2.19 4h11.62a1 1 0 0 1 .996 1.09L14.54 8h1.005l.256-2.819A2 2 0 0 0 13.81 3H9.828a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 6.172 1H2.5a2 2 0 0 0-2 2zm5.672-1a1 1 0 0 1 .707.293L7.586 3H2.19c-.24 0-.47.042-.683.12L1.5 2.98a1 1 0 0 1 1-.98h3.672z"}),u.default.createElement("path",{d:"M13.5 10a.5.5 0 0 1 .5.5V12h1.5a.5.5 0 1 1 0 1H14v1.5a.5.5 0 1 1-1 0V13h-1.5a.5.5 0 0 1 0-1H13v-1.5a.5.5 0 0 1 .5-.5z"}))),u.default.createElement(o.default,{message:"dropzone"}))),u.default.createElement(s.default,{showUppyModal:e,setShowUppyModal:t}))}},5356:function(e,t,a){var l=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,n)}:function(e,t,a,l){void 0===l&&(l=a),e[l]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&l(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(a(6540)),o=a(5777),d=i(a(4968));a(7872),a(6721),a(3464),a(1193);const s=i(a(3272)),c=i(a(9393)),f=a(6495),m=i(a(22)),p=i(a(3592)),_=i(a(6779)),h=i(a(4023)),g=i(a(3054)),y=a(5942);t.default=e=>{let{showUppyModal:t,setShowUppyModal:a}=e;const l=(0,h.default)(),n=(0,g.default)(),r=(0,y.useQueryClient)(),i=(0,o.useUppy)((()=>{const e=new d.default({autoProceed:!1,allowMultipleUploadBatches:!0,debug:"development"===s.default.env,restrictions:{maxFileSize:l.maxFileSize||7340032,allowedFileTypes:l.mimeTypes.length?l.mimeTypes:null},onBeforeFileAdded:()=>(t||a(!0),!0)});return e.use(c.default,{id:"XHRUpload",endpoint:n.getRoutes().upload,timeout:9e4,headers:{"X-Requested-With":"XMLHttpRequest"}}),e.on("file-added",(t=>{e.setFileMeta(t.id,{size:t.size})})),e.on("restriction-failed",((e,t)=>(0,f.errorAlert)(new m.default(`<b>${e.name}</b>: ${t}`)))),e.on("upload-error",((e,t,a)=>{const l=void 0!==a.body.title?m.default.fromApiProblem(a.body):new m.default(t,a.status);return(0,f.errorAlert)(l)})),e.on("upload-success",(async(e,t)=>{await r.invalidateQueries("filters"),await r.invalidateQueries(["media","list"])})),e}));return(0,u.useEffect)((()=>{if(i.getPlugin("DropTarget"))return;i.use(p.default,{id:"DropTarget",target:s.default.root_class,onDragOver:()=>{var e;null===(e=document.querySelector(".dropzone-drag-zone"))||void 0===e||e.setAttribute("style","visibility:visible;opacity:1")},onDrop:()=>{var e;null===(e=document.querySelector(".dropzone-drag-zone"))||void 0===e||e.removeAttribute("style")},onDragLeave:e=>{var t;e.target.classList.contains("dropzone-drag-zone")&&(null===(t=document.querySelector(".dropzone-drag-zone"))||void 0===t||t.removeAttribute("style"))}}),window.uppy=i;const{locale:e}=l;let t=e;if(t.indexOf("_")<0){const e=new RegExp(`${t.toLocaleLowerCase()}_`,"g");t=s.default.uppy_locales.find((t=>t.match(e)))}t||(t="en_US",console.error(`There are no translations for the locale ${e}. The en_US default translation pack has been loaded.`)),void 0===window.Uppy&&(window.Uppy={locales:{}}),void 0===window.Uppy.locales[t]?async function(){const e=`${s.default.assets_url_prefix}uppy/locales/`;await(0,_.default)(`${e}${t}.min.js`,(()=>{window.uppy.setOptions({locale:window.Uppy.locales[t]})}))}():window.uppy.setOptions({locale:window.Uppy.locales[t]})}),[i,l]),u.default.createElement(o.DashboardModal,{uppy:i,closeModalOnClickOutside:!0,disableInformer:!1,proudlyDisplayPoweredByUppy:!1,open:t,onRequestClose:()=>a(!1)})}},9239:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540));t.default=e=>{let{name:t,value:a,checkedValue:l=!1,label:r,type:i,icon:u}=e;return n.default.createElement("div",{role:"radio",tabIndex:0,"aria-checked":l===a,className:`${i}-filter-item ${i}-filter-item--${a.toLocaleLowerCase()}`},n.default.createElement("label",{title:r,htmlFor:`${i}-filter-item--${a.toLocaleLowerCase()}`},n.default.createElement("input",{tabIndex:-1,"aria-label":r,type:"radio",name:t,value:a,id:`${i}-filter-item--${a.toLocaleLowerCase()}`,defaultChecked:l===a}),n.default.createElement("span",null,u)))}},4799:function(e,t,a){var l=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,n)}:function(e,t,a,l){void 0===l&&(l=a),e[l]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&l(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(a(6540)),o=i(a(7112)),d=i(a(5982)),s=i(a(5014)),c=i(a(3842)),f=i(a(6944)),m=i(a(8862)),p=i(a(3059)),_=i(a(9144)),h=i(a(8735)),g=a(7718),y=a(3521),v=a(16),b=a(5942);t.default=()=>{const e=(0,m.default)(),t=(0,u.useRef)(null),{data:a,error:l,isLoading:n}=(0,p.default)(),r=(0,b.useQueryClient)(),i=(0,v.useSetAtom)(g.loadingState),[E,w]=(0,v.useAtom)(g.pageLayoutState),M=(0,u.useRef)(null),[O,S]=(0,u.useState)(!1);if((0,u.useEffect)((()=>{O&&M.current&&M.current.clientWidth<990&&(M.current.querySelector(".view-filter")&&(M.current.querySelector(".view-filter").style.margin="auto"),M.current.querySelector(".sort-filter")&&(M.current.querySelector(".sort-filter").style.margin="auto"))}),[O]),n)return u.default.createElement(_.default,null);if(l)return u.default.createElement(h.default,{error:l});return u.default.createElement("div",{className:"ranky-media__filters",ref:e=>{M.current=e,S(!!e)}},u.default.createElement("form",{role:"search",action:"",name:"media-filter",id:"media-form-filter",method:"GET",autoComplete:"off",onChange:e=>(e=>{i(!0);const a="search"===e.target.type?500:0;if(t.current&&clearTimeout(t.current),"view"===e.target.name)return w(e.target.value),void i(!1);t.current=setTimeout((async()=>{await r.refetchQueries(["media","list"]),i(!1)}),a)})(e)},u.default.createElement(o.default,{data:a.mimeTypes,name:"mime",operator:d.default.STARTS,defaultOption:{value:"all",label:e.trans("filters_mime_type")}}),u.default.createElement(o.default,{data:a.users,name:"createdBy",operator:d.default.EQUALS,defaultOption:{value:"all",label:e.trans("filters_user")}}),u.default.createElement(o.default,{data:a.availableDates,name:"createdAt",operator:d.default.EQUALS,defaultOption:{value:"all",label:e.trans("filters_date")}}),u.default.createElement(s.default,{name:"name",placeholder:e.trans("filters_search")}),E!==y.LayoutFormView.SELECTABLE?u.default.createElement(c.default,null):null,u.default.createElement(f.default,null)))}},5014:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(5982));t.default=e=>{let{name:t,placeholder:a}=e;return n.default.createElement("div",{className:"search-filter"},n.default.createElement("input",{name:`filters[${t}][${r.default.LIKE}]`,"aria-label":a,placeholder:a,type:"search",id:"search-input-filter"}))}},3842:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(9239)),i=l(a(8862)),u=a(3521),o=a(7718),d=a(16);t.default=()=>{const e=(0,i.default)(),t=(0,d.useAtomValue)(o.pageLayoutState),a=n.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-grid",viewBox:"0 0 16 16"},n.default.createElement("path",{d:"M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"})),l=n.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-list-task",viewBox:"0 0 16 16"},n.default.createElement("path",{fillRule:"evenodd",d:"M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5H2zM3 3H2v1h1V3z"}),n.default.createElement("path",{d:"M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5zM5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1h-9z"}),n.default.createElement("path",{fillRule:"evenodd",d:"M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5V7zM2 7h1v1H2V7zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5H2zm1 .5H2v1h1v-1z"}));return n.default.createElement("div",{className:"view-filter"},n.default.createElement(r.default,{name:"view",value:u.LayoutFormView.GRID,label:e.trans("filters_view_grid"),type:"view",icon:a,checkedValue:t}),n.default.createElement(r.default,{name:"view",value:u.LayoutFormView.LIST,label:e.trans("filters_view_list"),type:"view",icon:l,checkedValue:t}))}},7112:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540));t.default=e=>{let{name:t,operator:a,data:l,defaultOption:r={value:"all",label:"Todos los tipos"}}=e;return n.default.createElement("div",{className:`${t.toLocaleLowerCase()}-filter`},n.default.createElement("select",{name:`filters[${t}][${a}]`,id:`${t.toLocaleLowerCase()}-select-filter`},n.default.createElement("option",{value:r.value,key:r.value},r.label),l.map((e=>n.default.createElement("option",{value:e.value,key:e.value},e.label)))))}},6944:function(e,t,a){var l=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,n)}:function(e,t,a,l){void 0===l&&(l=a),e[l]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&l(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(a(6540)),o=i(a(9239)),d=i(a(8862));t.default=()=>{const e=(0,d.default)(),t=u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-sort-down",viewBox:"0 0 16 16"},u.default.createElement("path",{d:"M3.5 2.5a.5.5 0 0 0-1 0v8.793l-1.146-1.147a.5.5 0 0 0-.708.708l2 1.999.007.007a.497.497 0 0 0 .7-.006l2-2a.5.5 0 0 0-.707-.708L3.5 11.293V2.5zm3.5 1a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z"})),a=u.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-sort-up",viewBox:"0 0 16 16"},u.default.createElement("path",{d:"M3.5 12.5a.5.5 0 0 1-1 0V3.707L1.354 4.854a.5.5 0 1 1-.708-.708l2-1.999.007-.007a.498.498 0 0 1 .7.006l2 2a.5.5 0 1 1-.707.708L3.5 3.707V12.5zm3.5-9a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zM7.5 6a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5zm0 3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-3zm0 3a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1h-1z"})),[l,n]=(0,u.useState)("DESC");return u.default.createElement("div",{className:"sort-filter",onChange:function(e){n(e.target.value)}},u.default.createElement(o.default,{checkedValue:l,name:"sort[direction]",value:"DESC",label:e.trans("filters_sort_desc"),type:"sort",icon:t}),u.default.createElement(o.default,{checkedValue:l,name:"sort[direction]",value:"ASC",label:e.trans("filters_sort_asc"),type:"sort",icon:a}))}},7361:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(6573));t.default=e=>{let{media:t}=e;return n.default.createElement("img",{loading:"lazy","aria-hidden":"true",src:(0,r.default)("images/placeholder/application.jpg"),alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`})}},4301:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(6573));t.default=e=>{let{media:t}=e;return n.default.createElement("img",{loading:"lazy","aria-hidden":"true",src:(0,r.default)("images/placeholder/audio.jpg"),alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`})}},6016:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(4023)),i=l(a(6573));t.default=e=>{let{media:t}=e;var a;const l=(0,r.default)();if(Object.keys(l.placeholderImageTypes).includes(t.file.mimeSubType))return n.default.createElement("img",{loading:"lazy","aria-hidden":"true",src:(0,i.default)(l.placeholderImageTypes[t.file.mimeSubType]),"data-mime-type":t.file.mimeType,"data-mime-sub-type":t.file.mimeSubType,alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`});if(!l.supportedImageTypes.includes(t.file.mimeSubType))return n.default.createElement("img",{loading:"lazy","aria-hidden":"true",className:"ranky-img-placeholder ranky-img-placeholder--list",src:(0,i.default)("images/placeholder/image.jpg"),"data-mime-type":t.file.mimeType,"data-mime-sub-type":t.file.mimeSubType,alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`});const u=null!==(a=null==t?void 0:t.thumbnails.reduce(((e,t)=>null===e?t:e.dimension.width<t.dimension.width?e:t),null))&&void 0!==a?a:t;return n.default.createElement("img",{loading:"lazy","aria-hidden":"true","data-mime-type":t.file.mimeType,"data-mime-sub-type":t.file.mimeSubType,src:"url"in u?u.url:t.file.url,width:u.dimension.width,height:u.dimension.height,alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`})}},5991:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(7361)),i=l(a(7190)),u=l(a(4301)),o=l(a(6016)),d=l(a(8170)),s={application:r.default,audio:u.default,image:o.default,video:d.default,text:i.default};t.default=e=>{let{media:t}=e;const a=`${t.file.mimeType}_${t.file.mimeSubType}`,l=t.file.mimeType,r=s[a]||s[l]||s.application;return n.default.createElement(r,{media:t})}},7190:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(6573));t.default=e=>{let{media:t}=e;return n.default.createElement("img",{loading:"lazy","aria-hidden":"true",src:(0,r.default)("images/placeholder/text.jpg"),alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`})}},8170:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(6573));t.default=e=>{let{media:t}=e;return n.default.createElement("img",{loading:"lazy","aria-hidden":"true",src:(0,r.default)("images/placeholder/video.jpg"),alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`})}},3213:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(5991));t.default=e=>{let{pages:t,openModalFile:a}=e;return n.default.createElement("ul",{className:"file-list file-list--mode-grid",tabIndex:-1,role:"group"},t&&t.map((e=>e.result.map((e=>n.default.createElement("li",{key:e.id,"data-id":e.id},n.default.createElement("div",{className:`file-item mime-type-${e.file.mimeType} mime-subtype-${e.file.mimeSubType}`,role:"button","aria-label":e.description.alt,tabIndex:0,onClick:()=>a(e.id),onKeyDown:()=>a(e.id)},n.default.createElement(r.default,{media:e}))))))))}},1893:function(e,t,a){var l=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,n)}:function(e,t,a,l){void 0===l&&(l=a),e[l]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&l(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(a(6540)),o=i(a(5991)),d=a(6495),s=i(a(8862)),c=a(5942),f=a(7718),m=i(a(4628)),p=i(a(22)),_=a(16),h=i(a(3054));t.default=e=>{let{pages:t,openModalFile:a}=e;const[l,n]=(0,u.useState)(!1),[r,i]=(0,u.useState)([]),g=(0,_.useSetAtom)(f.loadingState),y=(0,s.default)(),v=(0,c.useQueryClient)(),b=(0,m.default)(),E=(0,h.default)();return u.default.createElement("div",{className:"file-list file-list--mode-list"},u.default.createElement("div",{className:"batch-actions"},u.default.createElement("select",{name:"media-batch-actions",id:"media-batch-actions",onChange:async e=>{let{target:t}=e;if(""===t.value)return{};if(0===r.length)return t.selectedIndex=0,(0,d.errorAlert)(new p.default(y.trans("bulk_actions_error_no_select")));const a=async()=>{g(!0);const e=await E.bulkDelete(r);return e.error?(0,d.errorAlert)(e.error):(await v.invalidateQueries(["media","list"]),await v.invalidateQueries("filters"),t.selectedIndex=0,n(!1),i([]),g(!1),(0,d.successAlert)())};return"delete"===t.value?(0,d.confirmDeleteAlert)(a,(function(){t.selectedIndex=0}),y.trans("bulk_actions_delete_prompt",{value:r.length})):(0,d.errorAlert)(new p.default(y.trans("bulk_actions_error_no_action",{value:(null==t?void 0:t.value)||"undefined"})))}},u.default.createElement("option",{value:""},y.trans("bulk_actions_title")),u.default.createElement("option",{value:"delete"},y.trans("bulk_actions_delete")))),u.default.createElement("div",{className:"table-responsive"},u.default.createElement("table",{className:"table-view-list"},u.default.createElement("thead",null,u.default.createElement("tr",null,u.default.createElement("th",null,u.default.createElement("input",{type:"checkbox",id:"ck-media-all",onChange:()=>{r.length>0?(n(!1),i([])):(n(!0),i(b.all().map((e=>e.id))))},checked:l})),u.default.createElement("th",null,y.trans("file")),u.default.createElement("th",null,y.trans("type")),u.default.createElement("th",null,y.trans("date")),u.default.createElement("th",null,y.trans("breakpoints")))),u.default.createElement("tbody",null,t&&t.map((e=>e.result.map((e=>{var t;return u.default.createElement("tr",{key:e.id},u.default.createElement("td",null,u.default.createElement("input",{type:"checkbox",name:"media[]",id:`ck-media-${e.id}`,onChange:()=>(e=>{if(r.includes(e))i(r.filter((t=>t!==e))),n(!1);else{const t=[...r,e];i(t),n(t.length===b.all().length)}})(e.id),checked:r.includes(e.id)})),u.default.createElement("td",null,u.default.createElement("div",{tabIndex:0,onClick:()=>a(e.id),onKeyDown:()=>a(e.id),role:"button"},u.default.createElement("span",{className:"file-preview"},u.default.createElement(o.default,{media:e})),u.default.createElement("span",{className:"file-name"},e.file.name))),u.default.createElement("td",null,e.file.mime," ",(null===(t=null==e?void 0:e.dimension)||void 0===t?void 0:t.label)?`(${e.dimension.label})`:null),u.default.createElement("td",null,e.createdAt," ",y.trans("by")," ",e.createdBy),u.default.createElement("td",null,e.thumbnails.length>0?u.default.createElement("ul",null,e.thumbnails.map((e=>u.default.createElement("li",{key:e.name+e.breakpoint},u.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.url},u.default.createElement("b",null,e.breakpoint,":")," ",e.dimension.label," ",u.default.createElement("b",null,"size:")," ",e.humanSize))))):"-"))}))))))))}},2925:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(5991)),i=a(7718),u=l(a(4023)),o=l(a(4628)),d=a(16);t.default=e=>{let{pages:t,openModalFile:a}=e;const[l,s]=(0,d.useAtom)(i.selectedMediaState),[,c]=(0,d.useAtom)(i.dbClickState),[f,m]=n.default.useState(null),p=(0,u.default)(),_=(0,o.default)();return n.default.createElement("ul",{tabIndex:-1,className:"file-list file-list--mode-grid file-list--mode-selectable"},t&&t.map((e=>e.result.map((e=>n.default.createElement("li",{key:`li-${e.id}`,"data-id":e.id,onDoubleClick:t=>{return a=e.id,l.includes(a)||s((e=>[...e,a])),m(a),void c(!0);var a}},n.default.createElement("div",{className:`file-item mime-type-${e.file.mimeType} mime-subtype-${e.file.mimeSubType}`,"aria-label":e.description.alt,role:"checkbox","aria-checked":l.includes(e.id),tabIndex:0},n.default.createElement("input",{tabIndex:-1,type:"checkbox",name:"media[]",id:`ck-media-${e.id}`,checked:l.includes(e.id),onChange:t=>function(e,t){if(!1!==p.isMultipleSelection){if("shiftKey"in e.nativeEvent&&!0===e.nativeEvent.shiftKey){if(null===f)return void m(t);const e=_.all().map((e=>e.id)),a=e.indexOf(t),l=e.indexOf(f),n=e.slice(Math.min(a,l),Math.max(a,l)+1);return s(n),void m(t)}l.includes(t)?s((e=>e.filter((e=>e!==t)))):s((e=>[...e,t])),m(t)}else s([t])}(t,e.id)}),n.default.createElement("label",{htmlFor:`ck-media-${e.id}`},n.default.createElement(r.default,{media:e})),n.default.createElement("button",{onClick:()=>a(e.id),type:"button"},n.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pencil",viewBox:"0 0 16 16"},n.default.createElement("path",{d:"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"}))))))))))}},8116:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(6573));t.default=e=>{let{media:t}=e;return n.default.createElement("object",{type:t.file.mime,data:t.file.url},n.default.createElement("img",{"aria-hidden":"true",src:(0,r.default)("images/placeholder/application.jpg"),alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`}))}},5248:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540));t.default=e=>{let{media:t}=e;return n.default.createElement("audio",{controls:!0,src:t.file.url,title:`${t.description.title} (${t.file.mime})`},n.default.createElement("track",{kind:"captions"}),"Your browser does not support the ",n.default.createElement("code",null,"audio")," element.")}},1627:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=a(3297),i=l(a(4023)),u=l(a(6573));t.default=e=>{let{media:t}=e;var a,l;const o=(0,i.default)();if(Object.keys(o.placeholderImageTypes).includes(t.file.mimeSubType))return n.default.createElement("a",{target:"_blank",href:t.file.url,"aria-label":`${t.description.title} (opens in a new window)`,rel:"noreferrer"},n.default.createElement("img",{src:(0,u.default)(o.placeholderImageTypes[t.file.mimeSubType]),"data-mime-type":t.file.mimeType,"data-mime-sub-type":t.file.mimeSubType,alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`}));if(!o.supportedImageTypes.includes(t.file.mimeSubType))return n.default.createElement("a",{target:"_blank",href:t.file.url,"aria-label":`${t.description.title} (opens in a new window)`,rel:"noreferrer"},n.default.createElement("img",{className:"ranky-img-placeholder ranky-img-placeholder--show",src:(0,u.default)("images/placeholder/image.jpg"),"data-mime-type":t.file.mimeType,"data-mime-sub-type":t.file.mimeSubType,alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`}));let d=`${t.file.url} ${t.dimension.width}w,`;return t.thumbnails.forEach((e=>{d+=` ${e.url} ${e.dimension.width}w,`})),n.default.createElement("a",{target:"_blank",href:t.file.url,"aria-label":`${t.description.title} (opens in a new window)`,rel:"noreferrer"},n.default.createElement("img",{src:t.file.url,"data-mime-type":t.file.mimeType,"data-mime-sub-type":t.file.mimeSubType,width:null!==(a=t.dimension.width)&&void 0!==a?a:"auto",height:null!==(l=t.dimension.height)&&void 0!==l?l:"auto",srcSet:t.dimension.width?(0,r.removeLastChar)(d,","):"",alt:t.description.alt,title:`${t.description.title}`}))}},9651:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540));t.default=e=>{let{media:t}=e;return n.default.createElement("a",{target:"_blank",href:t.file.url,"aria-label":`${t.description.title} (opens in a new window)`,rel:"noreferrer"},n.default.createElement("img",{className:"img-svg-preview",src:t.file.url,"data-mime-type":t.file.mimeType,"data-mime-sub-type":t.file.mimeSubType,alt:t.description.alt,title:`${t.description.title}`}))}},7135:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(8116)),i=l(a(9429)),u=l(a(5248)),o=l(a(9639)),d=l(a(1627)),s=l(a(9651)),c={application:r.default,audio:u.default,image:d.default,"image_svg+xml":s.default,video:o.default,text:i.default};t.default=e=>{let{media:t}=e;const a=`${t.file.mimeType}_${t.file.mimeSubType}`,l=t.file.mimeType,r=c[a]||c[l]||c.application;return n.default.createElement(r,{media:t})}},9429:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(6573));t.default=e=>{let{media:t}=e;return n.default.createElement("object",{type:t.file.mime,data:t.file.url},n.default.createElement("img",{"aria-hidden":"true",src:(0,r.default)("images/placeholder/text.jpg"),alt:t.description.alt,title:`${t.description.title} (${t.file.mime})`}))}},9639:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540));t.default=e=>{let{media:t}=e;return n.default.createElement("video",{controls:!0,title:`${t.description.title} (${t.file.mime})`},n.default.createElement("source",{src:t.file.url,type:t.file.mime}),n.default.createElement("track",{kind:"captions"}),"Sorry, your browser doesn't support embedded videos.")}},6159:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540));a(9871);const r=l(a(3224)),i=l(a(8311)),u=a(6495),o=a(7718),d=a(5942),s=l(a(4628)),c=a(16),f=l(a(3054));t.default=e=>{let{onClose:t}=e;const[a,l]=(0,c.useAtom)(o.currentMediaState),m=(0,d.useQueryClient)(),p=(0,s.default)(),_=(0,f.default)();return n.default.createElement("div",{className:"wrapper-ranky-media-modal-file",key:`ranky-media-modal-file-${a.id}`},n.default.createElement("div",{className:"ranky-media-modal-file ranky-media-modal-file--show",tabIndex:-1,"aria-labelledby":"ranky-media-modal-file","aria-modal":"true",role:"dialog"},n.default.createElement("div",{className:"ranky-media-modal-file__dialog",role:"document"},n.default.createElement("div",{className:"ranky-media-modal-file__dialog__header ranky-media-modal-file__dialog--bg-primary-dark"},n.default.createElement("h3",{className:"ranky-media-modal-file__dialog__header__title"},n.default.createElement(i.default,{message:"modal_title",data:{file_name:a.file.name,id:a.id}})),n.default.createElement("div",{className:"ranky-media-modal-file__dialog__header__options"},n.default.createElement("ul",null,n.default.createElement("li",null,n.default.createElement("button",{onClick:function(e){let{currentTarget:t}=e;var n;const r=p.list(),i=p.findIndex(a.id),u=r.pages[i.page].result[i.index-1],o=r.pages.length,d=i.page>0&&i.page<o;if(u)return l(u),t.removeAttribute("disabled");if(d){const e=r.pages[i.page-1].result.length-1,a=(null===(n=r.pages[i.page-1])||void 0===n?void 0:n.result[e])||null;if(a)return l(a),t.removeAttribute("disabled")}return t.setAttribute("disabled","")},type:"button",className:"ranky-media-modal-file__btn-media-prev js-prev-modal","aria-label":"Prev"},n.default.createElement("span",{"aria-hidden":"true"},"←"))),n.default.createElement("li",null,n.default.createElement("button",{onClick:function(e){let{currentTarget:t}=e;var n,r;const i=p.list(),u=p.findIndex(a.id),o=i.pages.length>u.page,d=(null===(n=i.pages[u.page])||void 0===n?void 0:n.result[u.index+1])||null;if(d)return l(d),t.removeAttribute("disabled");if(o){const e=(null===(r=i.pages[u.page+1])||void 0===r?void 0:r.result[0])||null;if(e)return l(e),t.removeAttribute("disabled")}return t.setAttribute("disabled","")},type:"button",className:"ranky-media-modal-file__btn-media-next js-next-modal","aria-label":"Next"},n.default.createElement("span",{"aria-hidden":"true"},"→"))),n.default.createElement("li",null,n.default.createElement("button",{onClick:t,type:"button",className:"ranky-media-modal-file__btn-media-close js-close-modal","aria-label":"Close"},n.default.createElement("span",{"aria-hidden":"true"},"×")))))),n.default.createElement("div",{className:"ranky-media-modal-file__dialog__content"},n.default.createElement(r.default,{onDelete:async(e,a)=>{e.preventDefault();const l=e.currentTarget;return(0,u.confirmDeleteAlert)((async()=>{const{id:e}=l.dataset;a(!0);const{data:n,error:r}=await _.delete(e);r?await(0,u.errorAlert)(r):(await m.invalidateQueries("filters"),await m.invalidateQueries(["media","list"]),await(0,u.successAlert)(null==n?void 0:n.message),t()),a(!1)}))}})))),n.default.createElement("div",{className:"ranky-media-modal-file-backdrop"}))}},3224:function(e,t,a){var l=this&&this.__createBinding||(Object.create?function(e,t,a,l){void 0===l&&(l=a);var n=Object.getOwnPropertyDescriptor(t,a);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[a]}}),Object.defineProperty(e,l,n)}:function(e,t,a,l){void 0===l&&(l=a),e[l]=t[a]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)"default"!==a&&Object.prototype.hasOwnProperty.call(e,a)&&l(t,e,a);return n(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=r(a(6540)),o=i(a(8862)),d=i(a(8311)),s=i(a(7135)),c=a(6495),f=a(7718),m=i(a(4628)),p=a(16),_=i(a(3054));t.default=e=>{let{onDelete:t}=e;var a;const l=(0,o.default)(),[n,r]=(0,p.useAtom)(f.currentMediaState),i=(0,_.default)(),h=(0,m.default)(),[g,y]=(0,u.useState)(!1),[v,b]=(0,u.useState)({id:n.id,name:n.file.basename,alt:n.description.alt,title:n.description.title,legend:n.description.legend,copyright:n.description.copyright}),E=e=>{const t=e.target,a={[t.name]:t.value};b({...v,...a})};return u.default.createElement("div",{className:"ranky-media-modal-file__dialog__content__show"},u.default.createElement("div",{className:"ranky-media-modal-file__dialog__content__show__preview"},u.default.createElement(s.default,{media:n}),u.default.createElement("button",{type:"button",className:"ranky-media-modal-file__btn-media-danger js-delete-media","data-id":n.id,disabled:g,onClick:e=>t(e,y)},"🗑️ ",u.default.createElement(d.default,{message:"delete"}))),u.default.createElement("div",{className:"ranky-media-modal-file__dialog__content__show__info"},u.default.createElement("table",null,u.default.createElement("tbody",null,u.default.createElement("tr",null,u.default.createElement("th",{scope:"row","aria-label":"form_name"},u.default.createElement(d.default,{message:"form_name"})),u.default.createElement("td",null,n.file.name)),u.default.createElement("tr",null,u.default.createElement("th",{scope:"row"},"URL"),u.default.createElement("td",null,u.default.createElement("a",{target:"_blank",href:n.file.url,rel:"noreferrer"},n.file.url))),u.default.createElement("tr",null,u.default.createElement("th",{scope:"row","aria-label":"file_type"},u.default.createElement(d.default,{message:"file_type"})),u.default.createElement("td",null,n.file.mime)),(null===(a=null==n?void 0:n.dimension)||void 0===a?void 0:a.label)?u.default.createElement("tr",null,u.default.createElement("th",{scope:"row","aria-label":"dimensions"},u.default.createElement(d.default,{message:"dimensions"})),u.default.createElement("td",null,n.dimension.label)):null,u.default.createElement("tr",null,u.default.createElement("th",{scope:"row","aria-label":"size"},u.default.createElement(d.default,{message:"size"})),u.default.createElement("td",null,n.file.humanSize)),u.default.createElement("tr",null,u.default.createElement("th",{scope:"row","aria-label":"created_at"},u.default.createElement(d.default,{message:"created_at"})),u.default.createElement("td",null,n.createdAt," ",u.default.createElement(d.default,{message:"by"})," ",n.createdBy)),u.default.createElement("tr",null,u.default.createElement("th",{scope:"row","aria-label":"updated_at"},u.default.createElement(d.default,{message:"updated_at"})),u.default.createElement("td",null,n.updatedAt," ",u.default.createElement(d.default,{message:"by"})," ",n.updatedBy)),u.default.createElement("tr",null,u.default.createElement("th",{scope:"row"},u.default.createElement(d.default,{message:"breakpoints"})),u.default.createElement("td",null,n.thumbnails.length>0?u.default.createElement("ul",null,n.thumbnails.map((e=>u.default.createElement("li",{key:e.name+e.breakpoint},u.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.url},u.default.createElement("b",null,e.breakpoint,":")," ",e.dimension.label," ",u.default.createElement("b",null,"size:")," ",e.humanSize))))):"-")))),u.default.createElement("form",{name:"media",id:"ranky-media-file__form",method:"POST",autoComplete:"off",encType:"multipart/form-data",onSubmit:async e=>{e.preventDefault(),y(!0);const{id:t}=n,{data:a,error:l}=await i.put(t,v);return l?(console.log(l),y(!1),(0,c.errorAlert)(l)):(r(a),b({...v,name:a.file.basename,alt:a.description.alt,title:a.description.title,legend:a.description.legend,copyright:a.description.copyright}),h.update(a),y(!1),(0,c.successAlert)())}},u.default.createElement("div",{className:"input-group"},u.default.createElement("label",{htmlFor:"name"},u.default.createElement(d.default,{message:"form_name"})),u.default.createElement("input",{type:"text",name:"name",id:"ranky-media-file__form__name",value:v.name,onChange:E,required:!0,autoComplete:"off"}),u.default.createElement("span",{className:"input-group-text"},".",n.file.extension)),u.default.createElement("label",{htmlFor:"alt"},u.default.createElement(d.default,{message:"form_alt"})),u.default.createElement("input",{type:"text",name:"alt",id:"ranky-media-file__form__alt",value:v.alt,onChange:E,required:!0}),u.default.createElement("label",{htmlFor:"title"},u.default.createElement(d.default,{message:"form_title"})),u.default.createElement("input",{type:"text",name:"title",id:"ranky-media-file__form__title",value:v.title,onChange:E,required:!0}),u.default.createElement("label",{htmlFor:"legend"},u.default.createElement(d.default,{message:"form_legend"})),u.default.createElement("input",{type:"text",name:"legend",id:"ranky-media-file__form__legend",value:v.legend,onChange:E}),u.default.createElement("label",{htmlFor:"copyright"},u.default.createElement(d.default,{message:"form_copyright"})),u.default.createElement("input",{type:"text",name:"copyright",id:"ranky-media-file__form__copyright",value:v.copyright,onChange:E}),u.default.createElement("input",{type:"hidden",name:"id",id:"ranky-media-file__form__id",defaultValue:v.id}),u.default.createElement("input",{type:"submit",disabled:g,value:l.trans("form_save")}))))}},355:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaProvider=void 0;const n=l(a(6540)),r=l(a(9144)),i=l(a(8735)),u=l(a(9868)),o=a(2894),d=a(5942),s=l(a(5151)),c=l(a(22)),f=a(3521),m=a(7718),p=a(16),_=l(a(392)),h=n.default.createContext({});t.MediaProvider=e=>{let{children:t,apiPrefix:a,selectionMode:l=!1,multipleSelection:g=!1,title:y=null,targetRef:v=null}=e,b=null;const E=_.default.create(a),w=E.getRoutes(),{data:M,error:O,isLoading:S}=(0,d.useQuery)("config",(()=>(0,o.fetcher)(w.config)));if(S)return n.default.createElement(r.default,null);if(O){if(!(O instanceof c.default)){console.error(O);const e=new c.default(O,400);return n.default.createElement(i.default,{error:e})}return n.default.createElement(i.default,{error:O})}return u.default.fromApi(M),u.default.apiPrefix=a||"",u.default.selectionMode=l,u.default.multipleSelection=g,u.default.title=y,u.default.targetRef=v,b={settings:u.default.getInstance(),translator:s.default.fromApi(M),mediaRepository:E},n.default.createElement(p.Provider,{initialValues:[[m.pageLayoutState,l?f.LayoutFormView.SELECTABLE:f.LayoutFormView.GRID]]},n.default.createElement(h.Provider,{value:b},t))},t.default=h},2894:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fetcherWithQueryString=t.fetcher=void 0;const n=l(a(22)),r=async e=>{const t=await fetch(e,{headers:new Headers({"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"})});if(!t.ok){throw((e,t,a)=>{if(!(null==e?void 0:e.title)){const l=`Error ${t.status}: ${t.statusText} when fetch ${a}`,r=new n.default(l,t.status);return r.data=e,r}return n.default.fromApiProblem(e)})(await t.json(),t,e)}return t.json()};t.fetcher=r;t.fetcherWithQueryString=async function(e){let t=encodeURI(`?page[number]=${arguments.length>1&&void 0!==arguments[1]?arguments[1]:1}`);const a=document.getElementById("media-form-filter");return a&&(t+=`&${new URLSearchParams(new FormData(a)).toString()}`),r(`${e}${decodeURI(t)}`)}},6495:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.successAlert=t.confirmDeleteAlert=t.errorAlert=void 0;const n=l(a(8465)),r=l(a(5151));t.successAlert=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const t=r.default.getInstance();return n.default.fire({title:e||t.trans("swal.successfully"),icon:"success",confirmButtonColor:"#6f9c40",timer:1500})},t.errorAlert=function(e){const t=e.hasCauses()?e.message:`Error ${e.status}`,a=e.hasCauses()?e.causesToHtml():e.message;return n.default.fire({title:t,html:a,icon:"error",confirmButtonColor:"#DD6B55"})},t.confirmDeleteAlert=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const l=r.default.getInstance();return n.default.fire({title:a||l.trans("swal.confirm_delete"),text:l.trans("swal.delete_text"),icon:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:l.trans("swal.confirm_button"),cancelButtonText:l.trans("swal.cancel_button")}).then((async a=>a.value?e():null!==t?t():{}))}},8339:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=a(6540),r=l(a(4023));t.default=e=>{const[t,a]=(0,n.useState)([]),l=(0,r.default)();return{onInsertSelection:(0,n.useCallback)(((t,n)=>{if(t.length<=0)return;const r=n.parentElement.querySelector(`input#${e}`);!1===l.isMultipleSelection?r.value=t[0].id||"":r.value=JSON.stringify(t.map((e=>e.id)))||JSON.stringify([]),a(t)}),[e,l]),selectedMedia:t,setSelectedMedia:a}}},336:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaFormPreview=t.MediaManagerModal=t.MediaManager=void 0;var n=a(143);Object.defineProperty(t,"MediaManager",{enumerable:!0,get:function(){return l(n).default}});var r=a(1988);Object.defineProperty(t,"MediaManagerModal",{enumerable:!0,get:function(){return l(r).default}});var i=a(8256);Object.defineProperty(t,"MediaFormPreview",{enumerable:!0,get:function(){return l(i).default}})},710:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=l(a(6540)),r=l(a(961)),i=l(a(3272)),u=a(1890),o=l(a(2213)),d=a(336),s=n.default.version.split(".")[0];let c;c="18"===s?(e,t)=>{r.default.createRoot(t).render(e)}:(e,t)=>{r.default.render(e,t)};const f=()=>{document.querySelectorAll(".ranky-media-form-type__content").forEach((e=>{var t;const a="true"===e.getAttribute("data-multiple-selection")||"1"===e.getAttribute("data-multiple-selection"),l=e.getAttribute("data-field-id");c(n.default.createElement(o.default,{selectionMode:!0,title:e.getAttribute("data-title")||"",multipleSelection:a,apiPrefix:e.getAttribute("data-api-prefix")||"",targetRef:e},n.default.createElement(d.MediaFormPreview,{fieldId:l,predefinedData:(null===(t=e.parentElement.querySelector(`input#${l}`))||void 0===t?void 0:t.value)||null})),e)}))};new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type&&e.addedNodes.forEach((e=>{e instanceof HTMLElement&&e.querySelector(".ranky-media-form-type__content")&&f()}))}))})).observe(document.body,{childList:!0,subtree:!0}),f(),(0,u.on)(document,".ranky-media-open-modal","click",(e=>{(e=>{const t=e.target;e.preventDefault();const a="true"===t.getAttribute("data-multiple-selection")||"1"===t.getAttribute("data-multiple-selection"),l=document.createElement("div");l.classList.add("wrapper-ranky-media-modal"),document.body.appendChild(l),c(n.default.createElement(o.default,{selectionMode:!0,title:t.getAttribute("data-title")||"",multipleSelection:a,apiPrefix:t.getAttribute("data-api-prefix")||"",targetRef:t},n.default.createElement(d.MediaManagerModal,{onCloseModal:()=>{l.remove()}})),l)})(e)})),document.querySelector(i.default.root_class)&&c(n.default.createElement(o.default,{apiPrefix:document.querySelector(i.default.root_class).getAttribute("data-api-prefix")||""},n.default.createElement(d.MediaManager,null)),document.querySelector(i.default.root_class))},7718:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.dbClickState=t.selectedMediaState=t.pageLayoutState=t.loadingState=t.currentMediaState=void 0;const l=a(16),n=(0,l.atom)(!1);t.dbClickState=n;const r=(0,l.atom)(null);t.currentMediaState=r;const i=(0,l.atom)(!1);t.loadingState=i;const u=(0,l.atom)("GRID");t.pageLayoutState=u;const o=(0,l.atom)([]);t.selectedMediaState=o},5982:function(e,t){var a;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.EQUALS="eq",e.NOT_EQUALS="neq",e.GREATER_THAN="gt",e.GREATER_THAN_OR_EQUAL="gte",e.LESS_THAN="lt",e.LESS_THAN_OR_EQUAL="lte",e.LIKE="like",e.NOT_LIKE="nlike",e.EXACT="exact",e.NOT_EXACT="nexact",e.STARTS="starts",e.ENDS="ends",e.INCLUDES="in",e.NOT_INCLUDES="nin"}(a||(a={})),t.default=a},3521:function(e,t,a){var l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutType=t.LayoutFormView=void 0;const n=l(a(2925)),r=l(a(3213)),i=l(a(1893));t.LayoutFormView={SELECTABLE:"SELECTABLE",LIST:"LIST",GRID:"GRID"},t.LayoutType={[t.LayoutFormView.SELECTABLE]:n.default,[t.LayoutFormView.GRID]:r.default,[t.LayoutFormView.LIST]:i.default}},347:function(e,t,a){a.r(t)},4591:function(e,t,a){a.r(t)},1193:function(e,t,a){a.r(t)},9871:function(e,t,a){a.r(t)},5934:function(e,t,a){a.r(t)},1548:function(e,t,a){a.r(t)},9362:function(e,t,a){a.r(t)},3561:function(e,t,a){a.r(t)}},a={};function l(e){var n=a[e];if(void 0!==n)return n.exports;var r=a[e]={exports:{}};return t[e].call(r.exports,r,r.exports,l),r.exports}l.m=t,e=[],l.O=function(t,a,n,r){if(!a){var i=1/0;for(s=0;s<e.length;s++){a=e[s][0],n=e[s][1],r=e[s][2];for(var u=!0,o=0;o<a.length;o++)(!1&r||i>=r)&&Object.keys(l.O).every((function(e){return l.O[e](a[o])}))?a.splice(o--,1):(u=!1,r<i&&(i=r));if(u){e.splice(s--,1);var d=n();void 0!==d&&(t=d)}}return t}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[a,n,r]},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.d=function(e,t){for(var a in t)l.o(t,a)&&!l.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.j=3,l.p="/bundles/rankymedia/",function(){var e={3:0};l.O.j=function(t){return 0===e[t]};var t=function(t,a){var n,r,i=a[0],u=a[1],o=a[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(n in u)l.o(u,n)&&(l.m[n]=u[n]);if(o)var s=o(l)}for(t&&t(a);d<i.length;d++)r=i[d],l.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return l.O(s)},a=self.webpackChunkranky_media_bundle=self.webpackChunkranky_media_bundle||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var n=l.O(void 0,[232,768],(function(){return l(710)}));n=l.O(n)}();